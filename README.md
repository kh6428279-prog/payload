# نظام Android Client & Server

نظام متطور للتحكم عن بُعد في أجهزة Android من خلال الكمبيوتر.

## 🏗️ هيكل المشروع

```
payload/
├── src/                          # الكود المصدري
│   ├── __init__.py              # ملف التهيئة
│   ├── config.py                # إعدادات النظام
│   ├── utils.py                 # الوظائف المساعدة
│   ├── android_generator.py     # مولد تطبيق Android
│   ├── server_listener.py       # خادم الاستماع
│   └── main_app.py              # التطبيق الرئيسي
├── main.py                      # نقطة البداية
├── setup.py                     # إعدادات التثبيت
├── requirements.txt             # المتطلبات
├── .gitignore                   # ملفات Git المتجاهلة
└── README.md                    # هذا الملف
```

## 🎯 المميزات الرئيسية

### 1. **مولد تطبيق Android**
- إنشاء تطبيق Android كامل مع كود Java
- إدخال IP والمنفذ المخصص
- اختبار الاتصال قبل إنشاء التطبيق
- **إنشاء ملف APK مباشرة** - لا حاجة لـ Android Studio
- إنشاء جميع الملفات المطلوبة (MainActivity.java, AndroidManifest.xml, build.gradle, strings.xml, activity_main.xml)
- زر لفتح مجلد APK بعد الإنشاء

### 2. **خادم الاستماع**
- الاستماع على IP ومنفذ محدد
- عرض الأجهزة المتصلة مع معلوماتها
- **أوامر تحكم متقدمة**:
  - إرسال رسائل مخصصة (Toast)
  - تشغيل اهتزاز الهاتف
  - تشغيل رنين الهاتف
  - فتح تطبيقات محددة
  - فتح مواقع ويب
  - الحصول على معلومات الجهاز
  - تشغيل الشاشة
  - قطع الاتصال
- معالجة متعددة للعملاء
- سجل مفصل للاتصالات والأوامر

## المميزات

### مولد تطبيق Android
- إنشاء تطبيق Android كامل مع كود Java
- إدخال IP والمنفذ المخصص
- اختبار الاتصال قبل إنشاء التطبيق
- **إنشاء ملف APK مباشرة** - لا حاجة لـ Android Studio
- إنشاء جميع الملفات المطلوبة (MainActivity.java, AndroidManifest.xml, build.gradle, strings.xml, activity_main.xml)
- زر لفتح مجلد APK بعد الإنشاء

### خادم الاستماع
- الاستماع على IP ومنفذ محدد
- عرض الأجهزة المتصلة مع معلوماتها
- **أوامر تحكم متقدمة**:
  - إرسال رسائل مخصصة (Toast)
  - تشغيل اهتزاز الهاتف
  - تشغيل رنين الهاتف
  - فتح تطبيقات محددة
  - فتح مواقع ويب
  - الحصول على معلومات الجهاز
  - تشغيل الشاشة
  - قطع الاتصال
- معالجة متعددة للعملاء
- سجل مفصل للاتصالات والأوامر

## كيفية الاستخدام

### 1. تشغيل البرنامج
```bash
python main.py
```

### 2. إنشاء تطبيق Android
1. اضغط على "مولد تطبيق Android"
2. أدخل IP والمنفذ المطلوب
3. اضغط "اختبار الاتصال" للتأكد من صحة الإعدادات
4. اضغط "إنشاء تطبيق Android" - سيتم إنشاء ملف APK تلقائياً
5. اضغط "فتح مجلد APK" للوصول إلى ملف APK الجاهز للتثبيت

### 3. تشغيل الخادم
1. اضغط على "خادم الاستماع"
2. أدخل IP (استخدم 0.0.0.0 للاستماع على جميع الواجهات)
3. أدخل المنفذ المطلوب
4. اضغط "بدء الاستماع"

### 4. اختبار النظام
1. شغل الخادم أولاً
2. أنشئ تطبيق Android مع نفس IP والمنفذ
3. ثبت التطبيق على جهاز Android
4. **افتح التطبيق على الهاتف - سيتصل تلقائياً بالخادم**
5. ستظهر معلومات الجهاز في قائمة "الأجهزة المتصلة"
6. استخدم أزرار "أوامر التحكم" للتحكم في الهاتف

### 5. أوامر التحكم المتاحة
- **رسالة مخصصة**: إرسال رسالة تظهر على شاشة الهاتف
- **اهتزاز**: تشغيل اهتزاز الهاتف لمدة ثانية
- **رنين**: تشغيل رنين الهاتف
- **معلومات الجهاز**: الحصول على تفاصيل الجهاز
- **تشغيل الشاشة**: تشغيل شاشة الهاتف
- **قطع الاتصال**: قطع الاتصال مع الهاتف
- **فتح تطبيق**: فتح تطبيق محدد (مثل WhatsApp)
- **فتح موقع**: فتح موقع ويب في المتصفح

## متطلبات النظام

- Python 3.6 أو أحدث
- نظام تشغيل Windows/Linux/macOS
- **Android SDK** (مثبت مع Android Studio أو منفصل)
- **Gradle** (اختياري - البرنامج يحاول استخدام gradlew المدمج)

## الملفات المُنشأة

عند إنشاء تطبيق Android، سيتم إنشاء المجلد `android_app` مع الملفات التالية:

```
android_app/
├── build.gradle (root level)
├── settings.gradle
├── gradle.properties
├── gradlew / gradlew.bat
├── gradle/wrapper/
├── app/
│   ├── build.gradle
│   └── src/main/
│       ├── AndroidManifest.xml
│       ├── java/com/example/clientapp/
│       │   └── MainActivity.java
│       └── res/
│           ├── layout/activity_main.xml
│           └── values/strings.xml
└── app/build/outputs/apk/debug/
    └── app-debug.apk (الملف النهائي)
```

## ملاحظات مهمة

- تأكد من أن المنفذ غير مستخدم من قبل تطبيق آخر
- للاتصال من خارج الشبكة المحلية، تأكد من إعدادات الجدار الناري
- التطبيق يحتاج إلى إذن الإنترنت في Android
- يمكن تخصيص IP والمنفذ حسب الحاجة
- **التطبيق يتصل تلقائياً بالخادم عند فتحه**
- **يمكن التحكم في الهاتف من الكمبيوتر مباشرة**
- **يدعم عدة أجهزة متصلة في نفس الوقت**

## استكشاف الأخطاء

### مشاكل الاتصال
- تأكد من أن الخادم يعمل قبل إنشاء التطبيق
- تحقق من إعدادات الجدار الناري
- تأكد من صحة IP والمنفذ

### مشاكل إنشاء التطبيق
- تأكد من وجود مساحة كافية على القرص
- تحقق من صلاحيات الكتابة في المجلد الحالي
- تأكد من تثبيت Android SDK
- إذا فشل بناء APK، يمكنك فتح المشروع في Android Studio لبناء APK يدوياً

## 🛠️ التطوير

### هيكل الكود

- **`src/config.py`**: يحتوي على جميع الإعدادات والثوابت
- **`src/utils.py`**: الوظائف المساعدة المشتركة
- **`src/android_generator.py`**: منطق إنشاء تطبيقات Android
- **`src/server_listener.py`**: منطق خادم الاستماع والتحكم
- **`src/main_app.py`**: التطبيق الرئيسي وواجهة المستخدم

### إضافة مميزات جديدة

1. **إضافة أوامر جديدة**: عدّل `AVAILABLE_COMMANDS` في `config.py`
2. **تخصيص الواجهة**: عدّل `UI_CONFIG` في `config.py`
3. **إضافة وظائف مساعدة**: أضف الدوال في `utils.py`
4. **تطوير أوامر التحكم**: عدّل `processCommand` في `android_generator.py`

### تشغيل في وضع التطوير

```bash
# تشغيل مباشر
python main.py

# أو تشغيل من مجلد src
cd src
python main_app.py
```

## 📝 الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام والتطوير.

## 🤝 المساهمة

نرحب بالمساهمات! يرجى:
1. Fork المشروع
2. إنشاء branch جديد للميزة
3. Commit التغييرات
4. Push إلى Branch
5. فتح Pull Request

## 📞 الدعم

هذا البرنامج مفتوح المصدر ويمكن تخصيصه حسب الحاجة.
